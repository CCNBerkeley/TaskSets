<!doctype html>
<html>
  <head>
    <title>Aliens</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="jspsych-5.0.3/jspsych.js"></script>
    <script src="jspsych-5.0.3/plugins/jspsych-text.js"></script>
    <script src="jspsych-5.0.3/plugins/jspsych-categorize.js"></script>
    <script src="jspsych-5.0.3/plugins/jspsych-instructions.js"></script>
    <script src="jspsych-5.0.3/plugins/jspsych-categorize-alienzzz2.js"></script>
    <link href="jspsych-5.0.3/css/jspsych.css" rel="stylesheet" type="text/css"></link>
  </head>
  <body>
  </body>

  <script>

  /* TDs
  - mouse instead of keys
  - better reward schedule (right now, contexts can be recognized just because of the amounts)
  - read the novelty paper with the crops and planets -> similar?
  - add the other levels
  - record data
  */

    alien_top = 230
    alien_height = 250
    below_aliens = alien_top + alien_height + 50
    sad_top = [alien_top + 100, alien_top + 50, alien_top]
    sad_left = [530, 810, 1100]
    reward_top = sad_top[0] - 27
    reward_left = sad_left[0] + 15
    button_top = alien_top + alien_height + 200
    button_height = 90
    button_dist = 50
    button1_left = 650
    button2_left = button1_left + button_height + button_dist
    button3_left = button2_left + button_height + button_dist
    button4_left = button3_left + button_height + button_dist
    below_buttons = button_top + button_height + 50

    /* define welcome message block */
    var bed = "<img src='img/bed.png' style='position:absolute; top:" + button_top + "px; left:" + button1_left + "px' height=" + button_height + ">"
    var umbrella = "<img src='img/umbrella.png' style='position:absolute; top:" + button_top + "px; left:" + button2_left + "px' height=" + button_height + ">"
    var plant = "<img src='img/plant.png' style='position:absolute; top:" + button_top + "px; left:" + button3_left + "px' height=" + button_height + ">"
    var rock = "<img src='img/rock.png' style='position:absolute; top:" + button_top + "px; left:" + button4_left + "px' height=" + button_height + ">"
    var response_buttons = bed + umbrella + plant + rock

    var highlight_rock = "<img src='img/border.png' style='position:absolute; top:" + button_top +
                              "px; left:" + button4_left + "px;' height=" + button_height + " width=" + button_height + " >"

    var aliens = "<img src='img/Aliens1.png' height=" + alien_height + ">"
    var aliens_abs = "<img src='img/Aliens1.png' style='position:absolute; top:" + alien_top + "px', height=" + alien_height + ">"
    var sadness0 = "<img src='img/sad.png' style='position:absolute; top:" + sad_top[0] + "px; left:" + sad_left[0] + "px;' height=120 >"
    var happiness0 = "<img src='img/happy2.png' style='position:absolute; top:" + sad_top[0] + "px; left:" + sad_left[0] + "px;' height=120 >"
    var happiness1 = "<img src='img/happy2.png' style='position:absolute; top:" + sad_top[1] + "px; left:" + sad_left[1] + "px;' height=120 >"
    var happiness2 = "<img src='img/happy2.png' style='position:absolute; top:" + sad_top[2] + "px; left:" + sad_left[2] + "px;' height=120 >"
    var number_feedback = "<p style='color:green; font-size:46px; position:absolute; top:" + reward_top + "px; left:" + reward_left + "px;'> +5 </p>"

    var welcome_block = "<p>Welcome to the experiment. Press 'next' to begin.</p>"

    var instructions1 = "<p>In the following game, you will be taking care of three cute aliens." +
      "The aliens live on a strange planet and your goal is to help them grow as fast as possible.</p>" +
      "<p>Each alien needs different things to thrive." +
      "One alien might need to chew on a rock in order grow, whereas another might need to catch cosmic rays with its umbrella</p>" +
      "<p>Over time, you will learn what each alien needs in order to grow.</p>" +
      aliens

    var instructions2 = "<p>In addition, the aliensâ€™ planet goes through different seasons, and aliens will need different things depending on these seasons!</p>" +
      "<p>For example, in order to grow, an alien might need to chew on a rock in the hot season, but it needs to sleep in a bed during the rainy season.</p>" +
      "<img src='img/hot.png' height=" + alien_height + ">" +
      "<img src='img/cold.png' height=" + alien_height + ">" +
      "<img src='img/rainy.png' height=" + alien_height + ">"

    var instructions3 = "<p>Let's practice the game with these three aliens:</p>" +
      aliens +
      "<p>Try to make each one of them grow as much as you can, by learning what each one needs!</p>"

    var instructions4 = "<p>Whenever an alien needs something, it will start crying, like the green alien below:</p>" +
      aliens_abs + sadness0 +
      "<div style='position:absolute; top:" + below_aliens + "px;'" +
        "<p>When an alien is unhappy like this, you can offer it one of several things to cheer it up and help it grow!</p>" +
        "<p>How about a chew on the black rock? Click on the rock to see if the green alien would like that!</p>" +
      "</div>" +
      response_buttons

    var instructions5 = "<p> The green alien liked the rock a lot! It is all happy again and it grew by 5 centimeters! </p>" +
      aliens_abs + happiness0 + number_feedback +
      response_buttons + highlight_rock +
      "<p style='position:absolute; top:" + below_buttons + "px;'> Next time, another alien will be sad " +
      "- try to learn which item each alien likes to help them grow!</p>"

    var instructions = {
    type: 'instructions',
    pages: [
        welcome_block,
        instructions1,
        instructions2,
        instructions3,
        instructions4,
        instructions5
    ],
    show_clickable_nav: true
}

    var training_block = {
      type: "categorize-alienzzz2",
      stimulus: "img/Aliens1.png",
      feedback_amounts: [5, 5, 5],
      choices: [74, 75, 76, 186],
      randomize_order: true,
      timeline: [
        {key_answer: 74, sad_alien: 0},
        {key_answer: 75, sad_alien: 1},
        {key_answer: 76, sad_alien: 2},
        {key_answer: 74, sad_alien: 0},
        {key_answer: 75, sad_alien: 1},
        {key_answer: 76, sad_alien: 2}
      ]
    }

    var instructions6 = {
      type: "text",
      text: "<p> Great job! You helped these three aliens grow a lot! </p>" +
      aliens_abs + happiness0 + happiness1 + happiness2 +
      response_buttons +
      "<div style='position:absolute; top:" + below_buttons + "px;'>" +
        "<p> Let's move on the real game now! </p>" +
        "<p> This time, you'll be on the aliens' planet, so the seasons will change! " +
        "Keep in mind that the aliens' preferences change with the seasons! </p>" +
      "</div>"
    }

    var hot_season = {
      season: "hot",
      feedback_amounts: [3, 2, 1],
      randomize_order: true,
      timeline: [
        {key_answer: 76, sad_alien: 0},
        {key_answer: 75, sad_alien: 1},
        {key_answer: 74, sad_alien: 2},
        {key_answer: 76, sad_alien: 0},
        {key_answer: 75, sad_alien: 1},
        {key_answer: 74, sad_alien: 2}
      ]
    }
    var cold_season = {
      season: "cold",
      feedback_amounts: [5, 4, 6],
      randomize_order: true,
      timeline: [
        {key_answer: 74, sad_alien: 0},
        {key_answer: 76, sad_alien: 1},
        {key_answer: 75, sad_alien: 2},
        {key_answer: 74, sad_alien: 0},
        {key_answer: 76, sad_alien: 1},
        {key_answer: 75, sad_alien: 2}
      ]
    }
    var rainy_season = {
      season: "rainy",
      feedback_amounts: [7, 9, 8],
      randomize_order: true,
      timeline: [
        {key_answer: 75, sad_alien: 0},
        {key_answer: 74, sad_alien: 1},
        {key_answer: 76, sad_alien: 2},
        {key_answer: 75, sad_alien: 0},
        {key_answer: 74, sad_alien: 1},
        {key_answer: 76, sad_alien: 2}
      ]
    }

    var all_seasons = {
      type: "categorize-alienzzz2",
      stimulus: "img/Aliens2.png",
      choices: [74, 75, 76, 186],
      timeline: [
        hot_season,
        cold_season,
        rainy_season
      ]
    }

    /* create experiment timeline array */
    var timeline = [];
    // timeline.push(welcome_block);
    // timeline.push(instructions);
    timeline.push(training_block, training_block, training_block, training_block, training_block, training_block, training_block, training_block);
    // timeline.push(instructions6);
    // timeline.push(all_seasons);

    /* start the experiment */
    jsPsych.init({
      timeline: timeline
    });

  </script>
</html>
